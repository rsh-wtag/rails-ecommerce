<h1 class="mb-4">Orders</h1>
<% if current_user.admin? %>
  <h2>All Orders</h2>
<% else %>
  <h2>Your Orders</h2>
<% end %>
<div class="container">
  <% if @orders.any? %>
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>Order ID</th>
          <th>User</th>
          <th>Total Amount</th>
          <th>Status</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
          <tr>
            <td><%= order.id %></td>
            <td><%= order.user.name %></td>
            <td><%= number_to_currency(order.total_amount, unit: "", format: "%n BDT") %></td>
            <td><%= order.status.humanize %></td>
            <td class="text-center">
              <%= link_to 'View', order_path(order), class: 'btn btn-info btn-sm' %>
              <% if current_user.admin? %>
                <%= link_to 'Update Order Status', edit_order_path(order), class: 'btn btn-warning btn-sm' %>
                <%= form_with(url: order_path(order), method: :delete, local: true, class: 'd-inline') do %>
                  <%= submit_tag 'Delete', data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="text-center">No orders found.</p>
  <% end %>
</div>
